{"ast":null,"code":"var _jsxFileName = \"/Users/vinaymoolya/Desktop/projects/medicineai/src/chatbot/ActionProvider.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ActionProvider = ({\n  createChatBotMessage,\n  setState,\n  children\n}) => {\n  _s();\n  const [medicines, setMedicines] = useState({});\n  const [med, setMed] = useState(\"\");\n  let message;\n  const diagnoseclass = async symptom => {\n    console.log(\"Diagnosis Module...\");\n    try {\n      const result = await axios.post(\"http://127.0.0.1:5000/diagnose/\", {\n        payload: symptom\n      });\n      console.log(\"Diagnosis Module Recieved Response :: \", result.data);\n      // now we need to pass this to question asking function\n      // nowe we directly communicate to the askquestion endpoint\n\n      const response = await axios.post(\"http://127.0.0.1:5000/askquestion/\", {\n        class: result.data.class,\n        disease: symptom,\n        response: \"init\"\n      });\n    } catch (e) {\n      console.log(\"There is some error in the diagnosis phase...\");\n    }\n  };\n  //   const askquestions = async (response) => {\n  //     console.log(\"Question Asking Module...\")\n  //     try{\n  //         const result = await axios.post(\"\",{\n  //         })\n  //     }\n  //   };\n  const querysymptom = async symptom => {\n    console.log(\"Sending the Symptom to the server\", symptom);\n    try {\n      const result = await axios.post(\"http://127.0.0.1:5000/data/\", {\n        payload: symptom\n      });\n      setMedicines(result.data);\n      console.log(\"Recieved Response :: \", result.data[\"Medicine_Recommendation\"].length);\n      message = createChatBotMessage(`You have been diagnosed for ${result.data[\"Disease\"]} !`, {\n        withAvatar: true,\n        delay: 500\n      });\n      updateState(message, \"default\");\n      message = createChatBotMessage(`Below listed are some of the recommended medicines..`, {\n        withAvatar: true,\n        delay: 500\n      });\n      updateState(message, \"default\");\n      result.data[\"Medicine_Recommendation\"].map((med, i) => {\n        message = createChatBotMessage(`${i}. ${med}`, {\n          delay: 500\n        });\n        updateState(message, \"default\");\n      });\n      message = createChatBotMessage(\"Enter the id of the Medicine That you would like to query about ?\", {\n        withAvatar: true,\n        delay: 500\n      });\n      updateState(message, \"medid\");\n    } catch (e) {\n      console.log(\"Error in Retrieving from Flask server....\");\n      console.log(e);\n    }\n  };\n  const querymedication = medid => {\n    console.log(\"You have chosen the option :: \", medid);\n    console.log(\"Medicine Chosen :: \", medicines.Medicine_Recommendation.at(medid));\n    setMed(medicines.Medicine_Recommendation.at(medid));\n    message = createChatBotMessage(`Please Type in your query for the Chosen Medicine(${medicines.Medicine_Recommendation.at(medid)}) !`, {\n      withAvatar: true,\n      delay: 500\n    });\n    updateState(message, \"medquery\");\n  };\n  const processquery = async inpquery => {\n    // we will be passing the medicine name and the query to the server ... which will use langchain to create a cypher query and then would return us the result\n    try {\n      const result = await axios.post(\"http://127.0.0.1:5000/medquery/\", {\n        query: inpquery,\n        medicine: med\n      });\n      console.log(\"Result From API :: \", result.data);\n      message = createChatBotMessage(`${result.data.Result}`, {\n        withAvatar: true\n      });\n      updateState(message, \"medquery\");\n    } catch (e) {\n      console.log(\"Problem in querying the medicine \", e);\n    }\n    message = createChatBotMessage(`Any more queries for the Chosen Medicine(${med}) !`, {\n      withAvatar: false,\n      delay: 500\n    });\n    updateState(message, \"medquery\");\n  };\n  const updateState = (message, checker) => {\n    setState(prev => ({\n      ...prev,\n      messages: [...prev.messages, message],\n      checker\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: React.Children.map(children, child => {\n      return /*#__PURE__*/React.cloneElement(child, {\n        actions: {\n          diagnoseclass,\n          querysymptom,\n          querymedication,\n          processquery\n        }\n      });\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n};\n_s(ActionProvider, \"KcSmwe3gkdMyS7uaqe3qHhfQbkI=\");\n_c = ActionProvider;\nexport default ActionProvider;\nvar _c;\n$RefreshReg$(_c, \"ActionProvider\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","ActionProvider","createChatBotMessage","setState","children","_s","medicines","setMedicines","med","setMed","message","diagnoseclass","symptom","console","log","result","post","payload","data","response","class","disease","e","querysymptom","length","withAvatar","delay","updateState","map","i","querymedication","medid","Medicine_Recommendation","at","processquery","inpquery","query","medicine","Result","checker","prev","messages","Children","child","cloneElement","actions","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/vinaymoolya/Desktop/projects/medicineai/src/chatbot/ActionProvider.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nconst ActionProvider = ({ createChatBotMessage, setState, children }) => {\n  const [medicines, setMedicines] = useState({});\n  const [med, setMed] = useState(\"\");\n  let message;\n  const diagnoseclass = async (symptom) => {\n    console.log(\"Diagnosis Module...\");\n    try {\n      const result = await axios.post(\"http://127.0.0.1:5000/diagnose/\", {\n        payload: symptom,\n      });\n      console.log(\"Diagnosis Module Recieved Response :: \", result.data);\n      // now we need to pass this to question asking function\n      // nowe we directly communicate to the askquestion endpoint\n\n      const response = await axios.post(\"http://127.0.0.1:5000/askquestion/\", {\n        class: result.data.class,\n        disease: symptom,\n        response: \"init\",\n      });\n      \n    } catch (e) {\n      console.log(\"There is some error in the diagnosis phase...\");\n    }\n  };\n  //   const askquestions = async (response) => {\n  //     console.log(\"Question Asking Module...\")\n  //     try{\n  //         const result = await axios.post(\"\",{\n  //         })\n  //     }\n  //   };\n  const querysymptom = async (symptom) => {\n    console.log(\"Sending the Symptom to the server\", symptom);\n\n    try {\n      const result = await axios.post(\"http://127.0.0.1:5000/data/\", {\n        payload: symptom,\n      });\n      setMedicines(result.data);\n      console.log(\n        \"Recieved Response :: \",\n        result.data[\"Medicine_Recommendation\"].length\n      );\n\n      message = createChatBotMessage(\n        `You have been diagnosed for ${result.data[\"Disease\"]} !`,\n        { withAvatar: true, delay: 500 }\n      );\n      updateState(message, \"default\");\n\n      message = createChatBotMessage(\n        `Below listed are some of the recommended medicines..`,\n        { withAvatar: true, delay: 500 }\n      );\n      updateState(message, \"default\");\n\n      result.data[\"Medicine_Recommendation\"].map((med, i) => {\n        message = createChatBotMessage(`${i}. ${med}`, { delay: 500 });\n        updateState(message, \"default\");\n      });\n\n      message = createChatBotMessage(\n        \"Enter the id of the Medicine That you would like to query about ?\",\n        { withAvatar: true, delay: 500 }\n      );\n      updateState(message, \"medid\");\n    } catch (e) {\n      console.log(\"Error in Retrieving from Flask server....\");\n      console.log(e);\n    }\n  };\n\n  const querymedication = (medid) => {\n    console.log(\"You have chosen the option :: \", medid);\n    console.log(\n      \"Medicine Chosen :: \",\n      medicines.Medicine_Recommendation.at(medid)\n    );\n    setMed(medicines.Medicine_Recommendation.at(medid));\n\n    message = createChatBotMessage(\n      `Please Type in your query for the Chosen Medicine(${medicines.Medicine_Recommendation.at(\n        medid\n      )}) !`,\n      { withAvatar: true, delay: 500 }\n    );\n    updateState(message, \"medquery\");\n  };\n  const processquery = async (inpquery) => {\n    // we will be passing the medicine name and the query to the server ... which will use langchain to create a cypher query and then would return us the result\n    try {\n      const result = await axios.post(\"http://127.0.0.1:5000/medquery/\", {\n        query: inpquery,\n        medicine: med,\n      });\n      console.log(\"Result From API :: \", result.data);\n      message = createChatBotMessage(`${result.data.Result}`, {\n        withAvatar: true,\n      });\n      updateState(message, \"medquery\");\n    } catch (e) {\n      console.log(\"Problem in querying the medicine \", e);\n    }\n\n    message = createChatBotMessage(\n      `Any more queries for the Chosen Medicine(${med}) !`,\n      { withAvatar: false, delay: 500 }\n    );\n    updateState(message, \"medquery\");\n  };\n\n  const updateState = (message, checker) => {\n    setState((prev) => ({\n      ...prev,\n      messages: [...prev.messages, message],\n      checker,\n    }));\n  };\n  return (\n    <div>\n      {React.Children.map(children, (child) => {\n        return React.cloneElement(child, {\n          actions: {\n            diagnoseclass,\n            querysymptom,\n            querymedication,\n            processquery,\n          },\n        });\n      })}\n    </div>\n  );\n};\n\nexport default ActionProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}